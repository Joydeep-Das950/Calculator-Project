<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Roboto', Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .calculator {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
            overflow: hidden;
            width: 300px;
        }

        .calculator-display {
            background-color: #6200ee;
            color: #fff;
            padding: 20px;
            text-align: right;
        }

        .calculator-operation {
            font-size: 16px;
            min-height: 24px;
            opacity: 0.8;
            margin-bottom: 8px;
        }

        .calculator-result {
            font-size: 36px;
            font-weight: 300;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background-color: #eeeeee;
        }

        .calculator-button {
            background-color: #fff;
            border: none;
            color: #333;
            cursor: pointer;
            font-size: 18px;
            height: 60px;
            outline: none;
            transition: background-color 0.2s;
        }

        .calculator-button:hover {
            background-color: #f5f5f5;
        }

        .calculator-button:active {
            background-color: #e0e0e0;
        }

        .calculator-button.operation {
            color: #6200ee;
            font-weight: 500;
        }

        .calculator-button.equals {
            background-color: #6200ee;
            color: #fff;
        }

        .calculator-button.equals:hover {
            background-color: #5000ce;
        }

        .calculator-button.equals:active {
            background-color: #4400b0;
        }

        .calculator-button.clear {
            color: #f44336;
            font-weight: 500;
        }

        .ripple {
            position: relative;
            overflow: hidden;
        }

        .ripple:after {
            content: "";
            display: block;
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            background-image: radial-gradient(circle, #fff 10%, transparent 10.01%);
            background-repeat: no-repeat;
            background-position: 50%;
            transform: scale(10, 10);
            opacity: 0;
            transition: transform 0.5s, opacity 0.8s;
        }

        .ripple:active:after {
            transform: scale(0, 0);
            opacity: 0.3;
            transition: 0s;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <div class="calculator-display">
            <div class="calculator-operation" id="operation"></div>
            <div class="calculator-result" id="result">0</div>
        </div>
        <div class="calculator-buttons">
            <button class="calculator-button clear ripple" onclick="clearCalculator()">C</button>
            <button class="calculator-button ripple" onclick="backspace()">⌫</button>
            <button class="calculator-button operation ripple" onclick="handleOperation('%')">%</button>
            <button class="calculator-button operation ripple" onclick="handleOperation('/')">/</button>
            
            <button class="calculator-button ripple" onclick="appendNumber('7')">7</button>
            <button class="calculator-button ripple" onclick="appendNumber('8')">8</button>
            <button class="calculator-button ripple" onclick="appendNumber('9')">9</button>
            <button class="calculator-button operation ripple" onclick="handleOperation('*')">×</button>
            
            <button class="calculator-button ripple" onclick="appendNumber('4')">4</button>
            <button class="calculator-button ripple" onclick="appendNumber('5')">5</button>
            <button class="calculator-button ripple" onclick="appendNumber('6')">6</button>
            <button class="calculator-button operation ripple" onclick="handleOperation('-')">-</button>
            
            <button class="calculator-button ripple" onclick="appendNumber('1')">1</button>
            <button class="calculator-button ripple" onclick="appendNumber('2')">2</button>
            <button class="calculator-button ripple" onclick="appendNumber('3')">3</button>
            <button class="calculator-button operation ripple" onclick="handleOperation('+')">+</button>
            
            <button class="calculator-button ripple" onclick="appendNumber('00')">00</button>
            <button class="calculator-button ripple" onclick="appendNumber('0')">0</button>
            <button class="calculator-button ripple" onclick="appendDecimal()">.</button>
            <button class="calculator-button equals ripple" onclick="calculate()">=</button>
        </div>
    </div>

    <script>
        let currentValue = '0';
        let firstOperand = null;
        let operator = null;
        let waitingForSecondOperand = false;
        let shouldResetDisplay = false;
        
        const operationDisplay = document.getElementById('operation');
        const resultDisplay = document.getElementById('result');
        
        function updateDisplay() {
            resultDisplay.textContent = currentValue;
        }
        
        function updateOperationDisplay() {
            if (firstOperand === null) {
                operationDisplay.textContent = '';
            } else {
                operationDisplay.textContent = `${firstOperand} ${operator}`;
            }
        }
        
        function appendNumber(number) {
            if (shouldResetDisplay) {
                currentValue = '0';
                shouldResetDisplay = false;
            }
            
            if (waitingForSecondOperand) {
                currentValue = number;
                waitingForSecondOperand = false;
            } else {
                currentValue = currentValue === '0' ? number : currentValue + number;
            }
            updateDisplay();
        }
        
        function appendDecimal() {
            if (shouldResetDisplay) {
                currentValue = '0';
                shouldResetDisplay = false;
            }
            
            if (waitingForSecondOperand) {
                currentValue = '0.';
                waitingForSecondOperand = false;
                updateDisplay();
                return;
            }
            
            if (!currentValue.includes('.')) {
                currentValue += '.';
            }
            updateDisplay();
        }
        
        function handleOperation(nextOperator) {
            const inputValue = parseFloat(currentValue);
            
            if (operator && waitingForSecondOperand) {
                operator = nextOperator;
                updateOperationDisplay();
                return;
            }
            
            if (firstOperand === null) {
                firstOperand = inputValue;
            } else if (operator) {
                const result = performCalculation();
                currentValue = String(result);
                firstOperand = result;
            }
            
            waitingForSecondOperand = true;
            operator = nextOperator;
            shouldResetDisplay = false;
            updateDisplay();
            updateOperationDisplay();
        }
        
        function performCalculation() {
            const secondOperand = parseFloat(currentValue);
            let result;
            
            switch (operator) {
                case '+':
                    result = firstOperand + secondOperand;
                    break;
                case '-':
                    result = firstOperand - secondOperand;
                    break;
                case '*':
                    result = firstOperand * secondOperand;
                    break;
                case '/':
                    if (secondOperand === 0) {
                        alert('Cannot divide by zero');
                        clearCalculator();
                        return 0;
                    }
                    result = firstOperand / secondOperand;
                    break;
                case '%':
                    result = (firstOperand / 100) * secondOperand;
                    break;
                default:
                    return secondOperand;
            }
            
            return Math.round(result * 10000000000) / 10000000000;
        }
        
        function calculate() {
            if (!operator || waitingForSecondOperand) {
                return;
            }
            
            const result = performCalculation();
            operationDisplay.textContent = `${firstOperand} ${operator} ${parseFloat(currentValue)} =`;
            currentValue = String(result);
            
            firstOperand = null;
            waitingForSecondOperand = false;
            operator = null;
            shouldResetDisplay = true;
            
            updateDisplay();
        }
        
        function clearCalculator() {
            currentValue = '0';
            firstOperand = null;
            operator = null;
            waitingForSecondOperand = false;
            shouldResetDisplay = false;
            updateDisplay();
            updateOperationDisplay();
        }
        
        function backspace() {
            if (waitingForSecondOperand || shouldResetDisplay) return;
            
            currentValue = currentValue.length > 1 ? 
                currentValue.slice(0, -1) : '0';
            updateDisplay();
        }
        
        updateDisplay();
    </script>
</body>
</html>
<!-- kono project k kivabe modify kora jai, first - css change, second - functionality change. -->
<!-- state variable : current value -->
 <!-- first operand : first operand nichi akta r akta  second operand-->
  <!-- waiting for second operand : kichu situation depend korbe j amra first na second operand input nicchi. + ba onno kono 
   operator e hit kori thle ei function ta akta input or operand er jonno wait korbe. jdi amra same situation second operator
   er jonno wait korchi, new operand nki oi operand er sathe hold e ache kina.
   should reset display : current value jta ache, seta amra use korchi.(first operand)
   jokhon 5 press koprlam, tokhn 5 er pase 52 hbe. waitingforsecondoperand etao perform korche ba execute korche. next operand jdi true hoi
   thle pase kore debe r jdi false hoi thle seta rseset hoe jabe
   updatedisplay hocche document object model theke data fetch hocche
   start press shouldresetdisplay jdi enable thak, 
   j data ta show kor6e seta holo current value
   nicher ta current value r oporer ta operation er value mane ki ki operation hobe. Appned er main kaj holo else e.
   Ei puro operation er code ta append e lekha ache.
   shouldresetdisplay() kno important ? display sobsomoy barbar reset korte hoi manually, sei karone ei function ta lekha.
   resetdisplay jdi true hoi, thle current value ta dekha jacche,
   second operand er jonno wait korche, kintu seta reset hoe jache after current value showing.
   current value includes (.) tahole seta jdi current value te dot(.) include na thak thle amra dot(.) add korchi.
   dot(.) er kaj akbar e kaj korbe. 
   prottekta function sese amra updatedisplay run korchi, current value update korar jonno.
   next asche handle operation - current value k number e convert kora hocche. parseFloat dia floating value passed hoche
   karon current value ta ache string e. operator = nextOperator(), operator jta ekhane show korche, bydefault operator jta ache
   calculation er jonno jta hocche, mane operation er jonno jta current value ache and second operator er jonno wait kor6e
   tokhn calculation er jonno whole process tai handleOperation() function handle kaj kor6e.
   Amra operator input gulo sobsomoy next operator thek input nebo. kichu perfom jokhn hocchena, tokhn eta
   first operand jdi age thek kichu na thak thle amra value input debo, tarpor, seta amra first operand e store kochi
   result = performCalculation()
   amra jokhn handleOperation korchi, firstOperand jdi null na hoi, thle first value print hoe gache.
   function calculate() {
            if (!operator || waitingForSecondOperand) {
                return;
            }
                ei situation e calculate button ta kaj korbena. jdi data thak const result dia amra calculator kaj korchi.
                FirstOperand k amra null kore dilam, prothom operand er value reset korlam. calculation korechi. 
                shouldresetdisplay true korbo r calculate hobe.
                  function clearCalculator()
                   function backspace() {
            if (waitingForSecondOperand || shouldResetDisplay) return;
            
            currentValue = currentValue.length > 1 ? 
                currentValue.slice(0, -1) : '0';
            updateDisplay();
        }
            jdi second operand er jonno wait kore 

            jdi current value kichu thak, ba 1 er thek besi kichu thak, thle current value-->
